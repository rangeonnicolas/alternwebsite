{% extends 'main.html' %}

{% load staticfiles %}

{% block content %}

                        <section class="contentSection">
                            <h1>{{title}}</h1>
                            <p class="intro">
                            {{description}}
                            </p>


                            <h2>Principaux impacts :</h2>

                            <p>
                                Voici les principaux impacts... [à compléter]:
                            </p>

<!--

                                        <div class="colorOnHoverContainer softBox colorOnHover" style="position:relative">
                                                <div class="buttons">
                                                    <span>
                                                        Par : <i class="icon-user icon1x"></i><br>
                                                        39 Sources : <i class="icon-magnifying icon1x"></i>
                                                    </span>
                                                </div>
                                                <table style="font-size:1.1em;">
                                                    <tr>
                                                        <td>
                                                            Impact sur :
                                                        </td>
                                                        <td>
                                                            <label class="impactCateg smallLabel">Climat</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            via :
                                                        </td>
                                                        <td>
                                                            <label class="via smallLabel">Financement de multinationnales polluantes</label>
                                                        </td>
                                                    </tr>
                                                </table>






                                            <div class="alternativeToMainImpact box">



                                                    <div class="logoAlternative">
                                                        <img class="logoAlternativeImage" src="{% static 'maquette/th/hand_index.svg' %}" alt=""></img>
                                                    </div>
                                                    <div class="alternativeToMainImpactContent">
                                                        <span style="display:block;margin-bottom:3px">Découvrez les alternatives!</span>
                                                        <div class="alternative">
                                                            <span>Consommer chez:
                                                             Crédit Bisounours </span>
                                                            <span class="buttonsAlternative">
                                                                <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-magnifying icon1x"></i>&nbsp;(39)
                                                            </span>
                                                        </div>
                                                        <div class="alternative">
                                                            <span>Consommer chez:
                                                             Crédit Coopératif</span>
                                                            <span class="buttonsAlternative">
                                                                <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-magnifying icon1x"></i>&nbsp;(39)
                                                            </span>
                                                        </div>
                                                        <div class="alternative">
                                                            <i class="icon-chevron_down"></i> Plus ...
                                                            <span class="buttonsAlternative" style="position:absolute;right:0px;margin-right:7px"><i class="icon-PEN icon1x"></i> Ajouter une alternative</span>
                                                        </div>
                                                    </div>

                                            </div>

                                        </div>








                                        <div class="colorOnHoverContainer softBox colorOnHover" style="position:relative">
                                                <div class="buttons">
                                                    <span>
                                                        Par : <i class="icon-user icon1x"></i><br>
                                                        39 Sources : <i class="icon-magnifying icon1x"></i>
                                                    </span>
                                                </div>
                                                <table style="font-size:1.1em;">
                                                    <tr>
                                                        <td>
                                                            Impact sur :
                                                        </td>
                                                        <td>
                                                            <label class="impactCateg smallLabel">Droit du travail</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            via :
                                                        </td>
                                                        <td>
                                                            <label class="via smallLabel">Travail de hamsters clandestins</label>
                                                        </td>
                                                    </tr>
                                                </table>






                                            <div class="alternativeToMainImpact box">


                                                    <div class="logoAlternative medaillon">
                                                        <img class="logoAlternativeImage" src="{% static 'maquette/th/hand_index.svg' %}" alt=""></img>
                                                    </div>
                                                    <div class="alternativeToMainImpactContent">
                                                        <span style="display:block;margin-bottom:3px">Alternatives :</span>
                                                        <div class="alternative">
                                                            <span>Consommer chez:
                                                             Crédit Touchoux </span>
                                                            <span class="buttonsAlternative">
                                                                <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-magnifying icon1x"></i>&nbsp;(39)
                                                            </span>
                                                        </div>
                                                        <div class="alternative">
                                                            <span>Adopter un hamster</span>
                                                            <span class="buttonsAlternative">
                                                                <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;
                                                                <i class="icon-magnifying icon1x"></i>&nbsp;(39)
                                                            </span>
                                                        </div>
                                                        <div class="alternative">
                                                            <i class="icon-chevron_down"></i> Plus ...
                                                            <span class="buttonsAlternative" style="position:absolute;right:0px;margin-right:7px"><i class="icon-PEN icon1x"></i> Ajouter une alternative</span>
                                                        </div>
                                                    </div>


                                            </div>

                                        </div>

-->
                            Bientôt il y aura quelquechose ici...

            <p>Mettre le bouton proposer Un principal Impact</p>




                            <h2>En détail...</h2>

                            <!-- todo:mettre en liste-->
                                {% for consprod in consumeaproduct %}
                                    {% with prod=consprod.product %}
                                    <div class="habitImpact">

                                        <div class="habitTitle">
                                            <a href="#"><i class="icon-chevron_right"></i></a>
                                            {{ prod.name }}
                                        </div>


                                        <div class="alternativeToMainImpact">
                                        {% for hasImpactOn in consprod.has_impact_on.all %}

                                            <div class="flexContainer">
                                                {% if hasImpactOn.impact_type == 'neg' %}
                                                <div class="logoAlternative"><img class="logoPlusOrMinusImage" src="{% static 'maquette/th/hand_thumbdown.svg' %}"></img></div>
                                                {% elif  hasImpactOn.impact_type == 'pos' %}
                                                <div class="logoAlternative"><img class="logoPlusOrMinusImage" src="{% static 'maquette/th/hand_thumb.svg' %}"></img></div>
                                                {% else %}
                                                <div class="logoAlternative"><img class="logoPlusOrMinusImage" src="{% static 'maquette/th/hand_thumb.svg' %}"></img></div>
                                                {% endif %}
                                                <div class="alternativeToMainImpactContent flexBoxMaxWidth">

                                                    <div style="margin: 5px 0">
                                                            <a href="#"><i class="icon-chevron_right"></i></a>
                                                            <label class="impactCateg smallLabel">{{ hasImpactOn.impactCateg.name }}</label>
                                                            <span style="font-style:italic">
                                                            {% if hasImpactOn.impact_type == 'neg' %}
                                                            &nbsp;(negative impact)
                                                            {% elif  hasImpactOn.impact_type == 'pos' %}
                                                            &nbsp;(positive impact)
                                                            {% else %}
                                                            &nbsp;(neutral impact)
                                                            {% endif %}
                                                            </span>
                                                            <!--<span style="display:float; float:right">Sources</span>-->
                                                    </div>
                                                    <div class="flexContainer flexWrap box" style="border-color:#BBBBBB">
                                                        <div class="flexBoxMaxWidth  minWidth1">
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#"><i class="icon-chevron_right"></i></a>
                                                                {{ prod.name }} {{hasImpactOn.becauseOf.relationType.name}} <label class="impactCateg smallLabel">{{hasImpactOn.becauseOf.to_rel.product.name}}</label>
                                                                <span style="font-style:italic">(according to: <a href="#" style="font-weight:bold">[...]</a>)</span>


                                                                <div>
                                                                Sources:

                                                                {% for source in hasImpactOn.sources.all %}

                                                                <div class="alternative">
                                                                    <span><label class="year smallLabel">{{source.date.year}}</label> {{source.title}}</a>
                                                                    </span>
                                                                    <span class="buttonsAlternative">
                                                                        <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                        <i class="icon-magnifying icon1x"></i>&nbsp;
                                                                    </span>
                                                                </div>

                                                                {% endfor %}
                                                                </div>

                                                        </div>


                                                        <div class="flexBoxMaxWidth minWidth1" >
                                                                                <div style="display:flex">
                                                                                    <div class="logoAlternative" style="display:inline-block">
                                                                                        <img class="logoAlternativeImage" src="{% static 'maquette/th/hand_index.svg' %}" alt=""></img>
                                                                                    </div>
                                                                                    <span style="display:inline-block">Alternatives :</span>
                                                                                </div>
                                                                                <div class="alternativeToMainImpactContent">


                                                                                    {% for alternative in hasImpactOn.alternatives.all %}

                                                                                        {% if alternative.to_rel.consumeaproduct %}

                                                                                            <div class="alternative">
                                                                                                <span>Consommer chez:
                                                                                                 {{ alternative.to_rel.consumeaproduct.product.name }} </span>
                                                                                                <span class="buttonsAlternative">
                                                                                                    <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                                                    <i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;
                                                                                                    <a href="#" onclick="alert('Bientôt il y aura une belle page qui montrera ces sources: ');"><i class="icon-magnifying icon1x"></i>&nbsp;(39)</a>
                                                                                                </span>
                                                                                            </div>
                                                                                        {% elif alternative.to_rel.habit %}

                                                                                            <div class="alternative">
                                                                                                <span>
                                                                                                 {{ alternative.to_rel.habit.name }} </span>
                                                                                                <span class="buttonsAlternative">
                                                                                                    <i class="icon-user icon1x"></i>&nbsp;|&nbsp;
                                                                                                    <i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;
                                                                                                    <a href="#" onclick="alert('Bientôt il y aura une belle page qui montrera ces sources: ');"><i class="icon-magnifying icon1x"></i>&nbsp;(39)</a>
                                                                                                </span>
                                                                                            </div>                                               {% endif %}

                                                                                    {% endfor %}

                                                                                    <!--<div class="alternative">-->
                                                                                        <!--<span>Garder tout son fric dans sa poche</span>-->
                                                                                        <!--<span class="buttonsAlternative">-->
                                                                                            <!--<i class="icon-user icon1x"></i>&nbsp;|&nbsp;-->
                                                                                            <!--<i class="icon-mute_off icon1x"></i>&nbsp;<i class="icon-users icon1x"></i>&nbsp;|&nbsp;-->
                                                                                            <!--<i class="icon-magnifying icon1x"></i>&nbsp;(39)-->
                                                                                        <!--</span>-->
                                                                                    <!--</div>-->
                                                                                    <div class="alternative">
                                                                                        <i class="icon-chevron_down"></i> Plus ...
                                                                                        <a href="/rest/alternative"><span class="buttonsAlternative" style="position:absolute;right:0px;margin-right:7px"><i class="icon-PEN icon1x"></i> Ajouter une alternative</span></a>
                                                                                    </div>
                                                                                </div>
                                                        </div>

                                                    </div>


                                                </div>

                                            </div>
                                        {% endfor %}
                                        </div>

                                        <a href="/rest/hasimpacton" alt="" style="font-size:0.8em">(Ajouter un impact)</a>


                                    </div>
                                    {% endwith %}
                                {% endfor %}



                             (note nico: transformer hasImpactOn.becauseOf.to_rel.product.name en hasImpactOn.becauseOf.to_rel.name)
                            <br/>topic dan chacun des behaviour
                            <br/>modificaion de chaq elemn rest en cliquant essus
                            <br/>mettre les sources démenties
                            <br/>tri des sources par date
                            <br/> date des sources: date de consultation + parutuon facultatives
                            <br/> un seu ls à ressource
                            <br/> responsive pas compressible à fond
                        </section>
{% endblock %}
<!--
<iframe
  src="http://www.koom.org/web/jsp/api/action.jsp?idaction=17&displayMap=0"
  frameborder="0" scrolling="no"
  width="310" height="500">
</iframe>

 <script type="text/javascript">
 	var csList = document.getElementsByClassName("contentSection");
	var cs = csList[0];
	var csStyle = cs.currentStyle || window.getComputedStyle(cs);
	var origPadding = parseInt(csStyle.paddingRight);alert(origPadding);

	window.onresize = function(event){
		if(csStyle.width == csStyle.minWidth){
			for(i=0; i<csList.length; i++){
				p = csList[i];
				p.style.paddingLeft = 2;
				p.style.paddingRight = 2;
			}
		}
		else{
			for(i=0; i<csList.length; i++){
				p = csList[i];
				p.style.paddingLeft = origPadding;
				p.style.paddingRight = origPadding;
			}
		}
	}
</script>

 -->

<!--

  <i class="icon-plus icon3x"></i>
 <i class="icon-pen icon3x"></i>
  <i class="icon-sheet icon3x"></i>
   <i class="icon-file_open icon3x"></i>
    <i class="icon-file_alt icon3x"></i>
     <i class="icon-attachment icon3x"></i>
      <i class="icon-cross_mark icon3x"></i>
       <i class="icon-file_close_alt icon3x"></i>
        <i class="icon-file_close icon3x"></i>
         <i class="icon-cancel_circle icon3x"></i>
<i class="icon-magnifying icon3x"></i>
<i class="icon-warning icon3x"></i>
<i class="icon-warning_alt icon3x"></i>
<i class="icon-magnifying_plus icon3x"></i>
<i class="icon-white_question icon3x"></i>
<i class="icon-black_question icon3x"></i>
<i class="icon-eye icon3x"></i>
<i class="icon-newspaper icon3x"></i>
<i class="icon-mute_off  icon3x"></i>
<i class="icon-users  icon3x"></i>
<i class="icon-message  icon3x"></i>
<i class="icon-discussion  icon3x"></i>
<i class="icon-video_camera icon3x"></i> -->


<!--
	checklist:
	- pas de redondance de description meta

	- titres en h1 h2
	- balises header, footer, nav, section(=grandes sections de la page), aside(=infos complementaires), article (https://openclassrooms.com/courses/apprenez-a-creer-votre-site-web-avec-html5-et-css3/structurer-sa-page)
	- pas de texte en dehors de balises
	- utilisation de balises spécifiques (https://openclassrooms.com/courses/apprenez-a-creer-votre-site-web-avec-html5-et-css3/memento-des-balises-html)
	- s'assurer que tous les <img> on un alt, même chaine de caractère vide si besoin
-->
